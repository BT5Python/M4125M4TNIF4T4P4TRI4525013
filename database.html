<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>evolution is my revolution</title>
<style>
body{
    font-family: 'Courier New', monospace;
    background: 
        linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.85)),
        url('BT5.jpg'); /* Gambar latar belakang */
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: #00FF00;
    margin: 0;
    display: flex;
    flex-direction: column;
    height: 100vh;
}

/* ======= VIDEO BACKGROUND ======= */
#bg-video {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -1; /* selalu di belakang */
    opacity: 0.6; /* ubah sesuai kebutuhan */
}

header {
    
    padding: 20px 0 10px 0;
    text-align: center;
    line-height: 1.1;
    border-bottom: 1px solid #white;
}

.text {
    font-size: 75px;
    margin-bottom: 0;
    color: #00FF00; /* üî¥ hanya judul utama merah */
}

.text1 {
    font-size: 30px;
    margin-top: 0;
    color: #FF0000; /* bisa juga tetap merah untuk kontras */
    animation: blinkText 1s infinite;
}

.header-buttons button {
    background: transparent;
    border: 1px solid #00FF00;
    color: #00FF00; /* tombol tetap hijau */
    padding: 8px 15px;
    cursor: pointer;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    transition: background 0.3s, color 0.3s;
}
    .highlight-section {
    color: #FFFF00; /* kuning terang */
    font-weight: bold;
}        


.header-buttons button:hover { background-color: #00FF00; color: black; }

.main-container { display: flex; flex: 1; border-top: 1px solid #00FF00; }
.search-panel {
    width: 35%; padding: 20px; display: flex; flex-direction: column;
    border-right: 2px solid #00FF00;
}
.search-panel h2 { text-align: center; margin-bottom: 20px; }
input, select {
    background: transparent; border: 1px solid #00FF00; color: #00FF00;
    padding: 10px; margin-bottom: 15px; font-size: 16px; border-radius: 4px; outline: none;
}
.info-text { font-size: 14px; text-align: center; margin-top: 10px; }
#member-buttons { display: flex; flex-direction: column; gap: 10px; margin-top: 10px; }

.output-panel { flex: 1; padding: 20px; overflow-y: auto; border-left: 2px solid #00FF00; }

.agent-profile { display: flex; gap: 20px; align-items: flex-start; flex-wrap: wrap; }
.agent-profile pre { flex: 1; white-space: pre-wrap; line-height: 1.4; }
.agent-profile img {
    width: 135px; height: 185px; object-fit: cover;
    border: 2px solid #00FF00; border-radius: 8px;
    display: none; opacity: 0; transition: opacity 1.2s ease-in-out;
}

.doc-buttons { display: flex; gap: 10px; margin-top: 15px; }
.not-found { color: #FF0000; font-weight: bold; }

button {
    background: transparent; border: 1px solid #00FF00; color: #00FF00;
    padding: 8px 12px; cursor: pointer; border-radius: 4px;
    font-family: 'Courier New', monospace; transition: background 0.3s, color 0.3s;
}
button:hover { background-color: #00FF00; color: black; }

@media (max-width: 768px) {
    .main-container { flex-direction: column; }
    .search-panel, .output-panel { width: 100%; border: none; border-bottom: 1px solid #00FF00; }
    .agent-profile { flex-direction: column; align-items: center; }
}
.agent-profile pre::after { content: "_"; animation: blink 1s infinite; }
@keyframes blinkText { 0%, 50%, 100% { opacity: 1; } 25%, 75% { opacity: 0; } }

/* Warna merah dan efek berkedip */
.secret-alert {
    color: #FF0000;
    font-weight: bold;
    animation: blinkSecret 1s infinite;
}

@keyframes blinkSecret {
    0%, 50%, 100% { opacity: 1; }
    25%, 75% { opacity: 0; }
}

/* ======== RECORDING TEXT (pojok kiri atas) ======== */
.recording-indicator {
    position: fixed;
    top: 10px;
    left: 15px;
    font-family: 'Courier New', monospace;
    font-size: 20px;
    font-weight: bold;
    color: #FF0000;
    animation: blinkRecording 1s infinite;
    z-index: 9999;
    user-select: none;
}

@keyframes blinkRecording {
    0%, 50%, 100% { opacity: 1; }
    25%, 75% { opacity: 0; }
}

    
</style>
</head>    
<body>

<video autoplay muted loop id="bg-video">
  <source src="" type="video/mp4">
  Browser Anda tidak mendukung video tag.
</video>
<div class="recording-indicator">‚óè RECORDING</div>
<header>
    <h1 class="text">PORTAL MONITORING TERMINAL</h1>
    <h1 class="text1">DATABASE</h1>
    <div class="header-buttons">        
        <button onclick="goTo('Struktur Organisasi Puslat.pdf')">struktur ORGANISASI</button>
        <button onclick="goTo('masakemasa.html')">masa ke MASA</button>
        <button onclick="goTo('Jabkosong.html')">jab KOSONG</button>
        <button onclick="goTo('personelpuslat.html')">daftar PERSONEL PUSLAT</button>
        <button onclick="goTo('pemuktahirandata.html')">pemuktahiran DATA</button>
        <button onclick="goTo('riwayathidup.html')">riwayat HIDUP</button>
        <button onclick="goTo('comingsoon.html')">Usul Kenaikan PANGKAT</button>
        <button onclick="goTo('kgb.html')">kenaikan gaji BERKALA</button>
        <button onclick="goTo('comingsoon.html')">PENSIUN</button>
        <button onclick="goTo('radiogram.html')">RADIOGRAM</button>
        <button onclick="goTo('bankdokumen.html')">bank DATA</button>
        <button onclick="goTo('index.html')">LOGOUT</button>
        <button onclick="showOnlineUsers()">USER ONLINE (PRO)</button>
    </div>
</header>

<div class="main-container">
    <div class="search-panel">
        <h2>Puslat Kodiklatau</h2>
        <label for="category-filter">Filter By Category:</label>
        <select id="category-filter">
          <option value="">--allcategories--</option>
        </select>

        <label for="search">Enter the Unit Keyword / Full Name</label>
        <input type="text" id="search" placeholder="">
        <p class="info-text">Select a category and type a keyword, then press ENTER to display a list of members</p>
        <div id="member-buttons"></div>
    </div>

    <div class="output-panel" id="output">
        <div class="agent-profile" id="agent-container">
            <pre id="agent-dossier">
Biodata will appear after clicking the member button
            </pre>
            <img id="agent-photo" src="" alt="Foto Personel">
        </div>
    </div>
</div>

<script>

// =========================================
// JSONP LOADER
// =========================================
function fetchJSONP(url, callback) {
  const cbName = "jsonp_cb_" + Math.random().toString(36).substr(2, 9);

  window[cbName] = function(data) {
    callback(data);
    delete window[cbName];
    document.body.removeChild(script);
  };

  const script = document.createElement("script");
  script.src = url + "?callback=" + cbName;
  document.body.appendChild(script);
}

// =========================================
// DATABASE GLOBAL
// =========================================
let personnelDB = [];   // ‚Üê INI YANG BENAR
const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbzO0NnT9BdWbZY1pdIBsQPTb2oFUOt4HBdQr4dVqCn8gpFCmFM-AK_mN8iK4hv22Ox-/exec";

// =========================================
// LOAD GOOGLE SHEET
// =========================================
fetchJSONP(WEBAPP_URL, data => {
    personnelDB = data;   // ‚Üê FIX DI SINI
    console.log("‚úî DATABASE LOADED:", personnelDB);

    populateCategoryDropdown();
});

// =========================================
// POPULATE CATEGORY DROPDOWN
// =========================================
function populateCategoryDropdown() {
    const categorySelect = document.getElementById("category-filter");
    const uniqueCategories = [...new Set(personnelDB.map(p => p.kategori).filter(Boolean))];

    uniqueCategories.sort();
    uniqueCategories.forEach(cat => {
        const opt = document.createElement("option");
        opt.value = cat;
        opt.textContent = cat;
        categorySelect.appendChild(opt);
    });
}

// =========================================
// SEARCH ELEMENTS
// =========================================
const searchInput = document.getElementById("search");
const memberBtnContainer = document.getElementById("member-buttons");
const dossierEl = document.getElementById("agent-dossier");
const photoEl = document.getElementById("agent-photo");
const agentContainer = document.getElementById("agent-container");
const outputPanel = document.getElementById("output");


// =========================================
// FORMAT TANGGAL
// =========================================
function formatTanggalIndonesia(dateStr) {
    if (!dateStr) return "-";
    let date = new Date(dateStr);

    if (isNaN(date)) {
        const parts = dateStr.includes("/") ? dateStr.split("/") : dateStr.split("-");
        if (parts.length === 3) {
            const [d, m, y] = parts.map(Number);
            date = new Date(y, m - 1, d);
        }
    }

    const d = String(date.getDate()).padStart(2, "0");
    const m = String(date.getMonth() + 1).padStart(2, "0");
    const y = date.getFullYear();

    return `${d}/${m}/${y}`;
}

// =========================================
// FILTER ANGGOTA
// =========================================
function showMemberButtons(keyword) {
    memberBtnContainer.innerHTML = "";

    const selectedCategory = document.getElementById("category-filter").value || "";

    const filtered = personnelDB.filter(p => {
        const kw = keyword.toLowerCase();
        const matchKeyword =
            (p.satker && p.satker.toLowerCase().includes(kw)) ||
            (p.nama_lengkap && p.nama_lengkap.toLowerCase().includes(kw));

        const matchCategory = !selectedCategory || p.kategori === selectedCategory;

        return matchKeyword && matchCategory;
    });

    if (filtered.length === 0) {
        memberBtnContainer.innerHTML = `<span class="not-found">‚ùå No members found</span>`;
        return;
    }

    filtered.forEach(agent => {
        const btn = document.createElement("button");
        btn.textContent = agent.nama_lengkap;
        btn.onclick = () => displayAgent(agent);
        memberBtnContainer.appendChild(btn);
    });
}

// =========================================
// TYPEWRITER & LOADING ANIMATION
// =========================================
function simulateAccessSequence(element, callback) {
    const steps = [
        ">>> initializing connection...",
        ">>> accessing database node...",
        ">>> verifying security clearance...",
        ">>> clearance level verified ‚úî",
        ">>> retrieving personnel data..."
    ];
    let i = 0;

    element.textContent = "";
    function next() {
        if (i < steps.length) {
            element.textContent += steps[i] + "\n";
            outputPanel.scrollTop = outputPanel.scrollHeight;
            i++;
            setTimeout(next, 550);
        } else callback();
    }
    next();
}

function typeWriter(element, text, agent, callback) {
    let i = 0;
    element.textContent = "";

    function type() {
        if (i < text.length) {
            element.textContent += text.charAt(i);
            i++;
            outputPanel.scrollTop = outputPanel.scrollHeight;
            setTimeout(type, 8);
        } else if (callback) {
            callback();
        }
    }
    type();
}

// =========================================
// TAMPILKAN BIODATA
// =========================================
function displayAgent(agent) {

    // --------- FOTO ---------
    let photoURL = agent.photo || "";
    if (photoURL.includes("drive.google.com")) {
        const match = photoURL.match(/[-\w]{25,}/);
        if (match) photoURL = `https://drive.google.com/uc?export=view&id=${match[0]}`;
    }
    if (!photoURL) {
        photoURL = "https://upload.wikimedia.org/wikipedia/commons/8/89/Portrait_Placeholder.png";
    }
    photoEl.src = photoURL;
    photoEl.style.display = "block";

    // --------- LOADING ANIMATION ---------
    simulateAccessSequence(dossierEl, () => {

        const biodata = `
===============================
 FILE: PERSONEL PUSLAT
 CLASSIFICATION: RAHASIA
===============================

NAMA        : ${agent.nama_lengkap}
PANGKAT     : ${agent.pangkat}
NRP/NIP     : ${agent.nrp_nip}
JABATAN     : ${agent.jabatan}
SATKER      : ${agent.satker}
TMT JABATAN : ${formatTanggalIndonesia(agent.tmt_jabatan)}

===============================
<END OF FILE>
Retrieved: ${new Date().toLocaleString()}
===============================`;

        typeWriter(dossierEl, biodata, agent, () => {});
    });
}


// =========================================
// SEARCH EVENT
// =========================================
searchInput.addEventListener("keydown", e => {
    if (e.key === "Enter") {
        const q = searchInput.value.trim();
        if (q) showMemberButtons(q);
    }
});

// =========================================
// SISTEM USER ONLINE
// =========================================
let localUserID = localStorage.getItem("portalUserID");
if (!localUserID) {
    localUserID = "USR-" + Math.random().toString(36).substring(2, 10).toUpperCase();
    localStorage.setItem("portalUserID", localUserID);
}
const ONLINE_API = "PASTE-URL-APPS-SCRIPT-DISINI";

function sendOnlinePing() {
    fetch(`${ONLINE_API}?action=ping&userID=${localUserID}`);
}
setInterval(sendOnlinePing, 10000);
sendOnlinePing();

function showOnlineUsers() {
    fetch(`${ONLINE_API}?action=getOnline`)
        .then(res => res.json())
        .then(list => {
            let msg = "===== USER ONLINE =====\n";
            list.forEach((u, i) => {
                msg += `${i + 1}. ${u.userID} (${u.lastSeen})\n`;
            });
            alert(msg);
        });
}

</script>

<div style="
    position: fixed;
    bottom: 15px;
    right: 20px;
    background: rgba(0,255,0,0.1);
    border: 1px solid #00FF00;
    padding: 8px 15px;
    color: #00FF00;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    border-radius: 6px;
    backdrop-filter: blur(3px);
">
    ‚òÖ PRO VERSION ACTIVE
</div>
</body>
</html>
evolutionismyrevolution/BT5Python









































































